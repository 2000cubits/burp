QUICK START
===========

HOW TO BUILD
------------
The following assumes that you are not installing the burp server via a
distribution's package management system.

You need to compile burp on a unix-based operating system first. Make sure that
you have openssl, zlib, librsync and uthash libraries and development libraries
installed. 

Debian/Ubuntu dependencies:
   
    With debian or ubuntu, this command should install them for you:
    apt-get install librsync-dev libz-dev libssl-dev uthash-dev

RHEL/CentOS dependencies:
	
    On RHEL, you need to install these crucial packages:
    yum install zlib-devel openssl-devel ncurses-devel libacl-devel openssl-perl

    You also need the packages librsync-devel and uthash.
    These can be custom built and installed. See rhel/ subdirectory for more
    details.
    Alternatively, they can be 'yum install'ed from the EPEL repository.

Then change to the burp source directory and run "./configure", then "make". All
being well, burp will compile successfully. Then finally, run "make install" as root to
install.


UNIX SERVER
-----------

Start the burp server with this command: burp -c /etc/burp/burp-server.conf

By default, the server will fork into the background and run as a daemon. To
stay in the foreground, add the '-F' option. The first time that the server
runs, its startup will be a slower than usual because it needs to generate its
SSL certificates. However, this will probably only be noticeable on old
machines.

The server is now ready for clients to connect to it.


A NOTE ON ADDING CLIENTS
------------------------

Each client is represented by a file in the server directory
'/etc/burp/clientconfdir'.
The client name is the same as the file name, and the file contains a field
called 'password'.
Clients have a 'burp.conf' configuration file.
For a client to connect to the server successfully, it has to contain a 'cname'
and a 'password' field that match a clientconfdir file on the server.

There is more on this in the 'SERVER CLIENTCONFDIR FILE' section in the man
page.

When a client connects to the server for the first time, SSL certificate
exchange takes place, which further secures subsequent connections.

The burp server usually comes with a client called 'testclient', password
'abcdefgh', already configured. This is assmumed to exist in the following
instructions about a unix client.
For the Windows client, you can either use 'testclient' or create a new
clientconfdir file. It is normally easiest to do something like this on the
server:
cd /etc/burp/clientconfdir
cp testclient windowsclient


UNIX CLIENT
-----------

If you are going to run the client on the same machine on which you installed
the server, the client will already be installed because the client is built
into the same binary (the behaviour of the binary depends upon the
configuration file that is given to it). Otherwise, you can either go through
the 'configure/make/make install' sequence on the client machine, or get burp
via your distribution's package manager.

The example client configuration file is /etc/burp/burp.conf.
It will backup /home by default.

You can either force a backup by hand:
burp -a b

Or add a regular cron job like the following to /etc/cron.d/burp (or
equivalent). This makes the client ask the server every twenty minutes whether
it is yet time for a new backup. It is probably a good idea to change the
numbers for each client, in order to spread the load a bit:
MAILTO=
7,27,47 * * * * root    /usr/sbin/burp -a t

Whether or not an instance of the client results in an actual backup depends
upon the timer settings in the server config files.


WINDOWS CLIENT
--------------

Pick the 32-bit or 64-bit Burp installer as appropriate - visit
http://burp.grke.org/ to find one of them.

If you need to compile one yourself, instructions can be found at
src/win32/README in the source package.

You will need to run the installer as administrator.

The Windows installer will ask you for the address of your server, the client
name, and the client password. Make sure that a matching file exists in
/etc/burp/clientconfdir on the server.

Burp will then install its files to: C:/Program Files/Burp
(Note that the "C:/Program Files/" part may differ, depending on Windows'
language settings).
If you need to change client configuration settings, the file can be found at:
C:/Program Files/Burp/burp.conf
It will be configured to backup "C:/Users", if it existed at installation
time, or otherwise "C:/Documents and Settings".

A Windows Scheduler task will have been installed and will be configured to
run every 20 minutes from the time of the installation. Whether or not this
results in an actual backup depends upon the timer settings in the server
config files.

To force a backup by hand, start the burp client from within its directory:
cd "C:\Program Files\Burp\bin"
burp.exe -a b
If you are running Windows 7, you might need to start the command prompt with
"Run as Administrator".



For more help, see the man page - type 'man burp'.
